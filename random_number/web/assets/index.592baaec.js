import{_ as j,d as N,r as p,b,e as o,f as s,t as r,h as e,F as f,j as k,g as E,l as V,k as B,v as F,s as W,B as z,o as u,n as A,p as L,q as M}from"./index.185788fa.js";/* empty css              */const T=h=>(L("data-v-319e0f3b"),h=h(),M(),h),q={class:"start"},G={class:"operation"},J={class:"name"},O={class:"btn"},H={key:0,class:"winning"},K=T(()=>s("h3",{style:{color:"white"}},"\u4E2D\u5956\u540D\u5355",-1)),P=N({__name:"index",setup(h){let y=0;const n=JSON.parse(localStorage.getItem("list")||"[]");let t=p(n.length);const g=p(!1),{getData:w}=b("info","postInfo");w().then(d=>{const{code:m,data:c}=d;m===33&&(l.value=c.join_user_list||[])});const l=p([]),_=p([]),x=p([]),{getData:I}=b("_","postWinning"),C=()=>{console.log(x.value),t.value-=1,_.value=[],g.value=!1};function D(){if(t.value<1||l.value.length<1)return;y=n[t.value-1].num,g.value=!1;let d=0,m=setInterval(()=>{let c=[];for(let a=0;a<y;a++){let i=Math.floor(Math.random()*l.value.length);if(c.includes(i)){a--;continue}c.push(i)}_.value=c,d+=1,d>=20&&(clearInterval(m),W(()=>{g.value=!0,x.value.push({...n[t.value-1],level:t.value,lucky:_.value.map(v=>l.value[v])});const a={leve:t.value,lid:localStorage.getItem("uuid")},i=_.value.map(v=>l.value[v].cj_number),S={zj_str:window.btoa(i.join(","))};I({data:a,headers:S}).then(v=>{console.log(v)})}))},200)}return(d,m)=>{const c=z;return u(),o("div",q,[s("div",G,[s("div",J,[s("span",null,r(e(t)>0?e(t):1)+"\u7B49\u5956 ",1),s("span",null,[e(t)>1?(u(),o(f,{key:0},[k(r(e(n)[e(t)-1].name)+" "+r("  "+e(n)[e(t)-1].num)+" \u4EBA ",1)],64)):(u(),o(f,{key:1},[k(r(e(n).length&&"  "+e(n)[0].name+e(n)[0].num+"\u4EBA"),1)],64))])]),s("div",O,[E(c,{style:{width:"100px"},class:"start-btn",onClick:D},{default:V(()=>[k("\u5F00\u59CB\u62BD\u5956")]),_:1})])]),s("ul",null,[(u(!0),o(f,null,B(e(l),(a,i)=>(u(),o("li",{key:i,class:A({active:e(_).includes(i)})},[s("div",null,r(a.cj_number),1)],2))),128))]),e(g)?(u(),o("div",H,[s("span",{class:"close",onClick:C},"\xD7"),K,s("div",null,[(u(!0),o(f,null,B(e(_),a=>(u(),o("p",{key:a},r(e(l)[a].cj_number)+" ("+r(e(l)[a].uuid)+") ",1))),128))])])):F("",!0)])}}});var U=j(P,[["__scopeId","data-v-319e0f3b"]]);export{U as default};
